{"id":225,"date":"2023-08-03T11:02:26","date_gmt":"2023-08-03T03:02:26","guid":{"rendered":"https:\/\/s2.vpsee.net\/?p=225"},"modified":"2023-08-04T18:36:55","modified_gmt":"2023-08-04T10:36:55","slug":"runcloud-login","status":"publish","type":"post","link":"https:\/\/s2.vpsee.net\/runcloud-login\/","title":{"rendered":"RunCloud \u4e0a\u963b\u6b62 wp-login.php \u66b4\u529b\u653b\u64ca"},"content":{"rendered":"\n<p>\u5728 RunCloud \u7ba1\u7406\u7684\u4f3a\u670d\u5668\u4e0a\u4f7f\u7528 fail2ban \u7981\u6b62\u66b4\u529b\u7834\u89e3 WordPress \u7684 <code>wp-login.php<\/code> \u7684 IP \u5730\u5740\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u589e\u52a0\u4e00\u500b WordPress \u904e\u6ffe\u898f\u5247\u5728 fail2ban \u76ee\u9304\u88e1<\/h2>\n\n\n\n<p>&nbsp;\u5efa\u7acb\u4e00\u500b&nbsp;<code>wordpress.conf<\/code>&nbsp;\u6587\u4ef6\uff0c\u653e\u5165&nbsp;<code>\/etc\/fail2ban\/filter.d\/<\/code> \u76ee\u9304\u4e0b\uff1a<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">[Definition]\nfailregex = ^&lt;HOST&gt; .* \"POST .*wp-login.php\n            ^&lt;HOST&gt; .* \"POST .*xmlrpc.php\nignoreregex =<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<p>\u5982\u679c\u53ea\u60f3\u8981 <code>wp-login.php<\/code>\uff0c\u53ef\u4ee5\u5c07 <code>xmlrpc.php<\/code> \u9019\u4e00\u884c\u522a\u9664<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u589e\u52a0\u4e00\u500b WordPress \u904e\u6ffe\u898f\u5247\u5728 fail2ban Jail \u8a2d\u5b9a<\/h2>\n\n\n\n<p>\u5efa\u7acb\u4e00\u500b&nbsp;<code>wordpress.conf<\/code>&nbsp;\u6587\u4ef6\uff0c\u653e\u5165&nbsp;<code>\/etc\/fail2ban\/jail.d\/<\/code> \u76ee\u9304\u4e0b\uff1a<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">[wordpress]\nenabled = true\nusedns = no\nport = http,https\nfilter = wordpress\nbanaction = firewallcmd-new\nlogpath = \/home\/*\/logs\/nginx\/*_access.log\nmaxretry = 4\nfindtime = 1200\nbantime = 86400<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<p>\u4fee\u6539\u9650\u5236\u8acb\u4fee\u6539\u9019 3 \u500b\u53c3\u6578\uff1a<\/p>\n\n\n\n<ul>\n<li>maxretry<\/li>\n\n\n\n<li>bantime<\/li>\n\n\n\n<li>findtime<\/li>\n<\/ul>\n\n\n\n<p>\u6b64\u8a2d\u5b9a\u662f 20 \u5206\u9418\u5167\u5bb9\u5141\u767b\u5165 4 \u6b21\uff0c\u8d85\u51fa\u6b64\u7bc4\u570d\uff0cIP \u6703\u88ab\u7981\u6b62\uff0c\u6700\u597d\u5c07\u81ea\u5df1\u7684 IP \u52a0\u5165\u767d\u540d\u55ae\u3002<\/p>\n\n\n\n<p>logpath \u662f\u4f7f\u7528 RunCloud \u65e5\u8a8c\u8def\u5f91\u548c firewallcmd-new \u639b\u9264\u7684 banaction \u503c\uff0c\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u5728 RunCloud \u63a7\u5236\u53f0\u4e2d\u770b\u5230\u88ab failed2ban \u7981\u6b62\u7684 IP\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u91cd\u65b0\u555f\u52d5 fail2ban<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">service fail2ban restart<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<div class=\"wp-block-stackable-icon-label stk-block-icon-label stk-block stk-ba2d298\" data-block-id=\"ba2d298\"><div class=\"stk-row stk-inner-blocks stk-block-content\">\n<div class=\"wp-block-stackable-icon stk-block-icon has-text-align-left stk-block stk-9c883ac\" data-block-id=\"9c883ac\"><style>.stk-9c883ac .stk--svg-wrapper .stk--inner-svg svg:last-child{height:20px !important;width:20px !important}.stk-9c883ac .stk--svg-wrapper .stk--inner-svg svg:last-child,.stk-9c883ac .stk--svg-wrapper .stk--inner-svg svg:last-child :is(g,path,rect,polygon,ellipse){fill:#f50202 !important}<\/style><span class=\"stk--svg-wrapper\"><div class=\"stk--inner-svg\"><svg style=\"height:0;width:0\"><defs><linearGradient id=\"linear-gradient-9c883ac\" x1=\"0\" x2=\"100%\" y1=\"0\" y2=\"0\"><stop offset=\"0%\" style=\"stop-opacity:1;stop-color:var(--linear-gradient-9-c-883-ac-color-1)\"><\/stop><stop offset=\"100%\" style=\"stop-opacity:1;stop-color:var(--linear-gradient-9-c-883-ac-color-2)\"><\/stop><\/linearGradient><\/defs><\/svg><svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"info-circle\" class=\"svg-inline--fa fa-info-circle fa-w-16\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" viewBox=\"0 0 512 512\" width=\"32\" height=\"32\"><path fill=\"currentColor\" d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"><\/path><\/svg><\/div><\/span><\/div>\n\n\n\n<div class=\"wp-block-stackable-heading stk-block-heading stk-block-heading--v2 stk-block stk-09de358\" id=\"\u5982\u679c-fail-2-ban\u7121\u6cd5\u555f\u52d5\uff0c\u8acb\u78ba\u5b9a\u4f60\u7684-run-cloud-\u81f3\u5c11\u914d\u7f6e\u4e86\u4e00\u500b\u7db2\u7ad9\uff0c\u56e0\u70ba\uff0c\u9019\u5c07\u901a\u904e-nginx-\u65e5\u8a8c\u4f86\u9a57\u8b49\u65e5\u8a8c\u8def\u5f91\uff0c\u5426\u5247-fail-2-ban-\u5c07\u7121\u6cd5\u555f\u52d5\u3002\" data-block-id=\"09de358\"><p class=\"stk-block-heading__text\">\u5982\u679c fail2ban\u7121\u6cd5\u555f\u52d5\uff0c\u8acb\u78ba\u5b9a\u4f60\u7684 RunCloud \u81f3\u5c11\u914d\u7f6e\u4e86\u4e00\u500b\u7db2\u7ad9\uff0c\u56e0\u70ba\uff0c\u9019\u5c07\u901a\u904e nginx \u65e5\u8a8c\u4f86\u9a57\u8b49\u65e5\u8a8c\u8def\u5f91\uff0c\u5426\u5247 fail2ban \u5c07\u7121\u6cd5\u555f\u52d5\u3002<\/p><\/div>\n<\/div><\/div>\n\n\n\n<h2 class=\"wp-block-heading\">\u6aa2\u67e5 fail2ban \u65e5\u8a8c<\/h2>\n\n\n\n<p>\u6aa2\u67e5 fail2ban\u65e5\u8a8c\u5167\u5bb9\uff0c\u78ba\u8a8d\u8f09\u5165\u662f\u5426\u6709\u932f\u8aa4<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\"><span style=\"background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 13px;\">tail -f \/var\/log\/fail2ban.log<\/span><\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<h2 class=\"wp-block-heading\">\u6aa2\u67e5 wordpress Jail \u72c0\u614b<\/h2>\n\n\n\n<p>\u53ef\u4ee5\u6aa2\u67e5 WordPress jail \u72c0\u614b<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">fail2ban-client status wordpress<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<p>\u9019\u88e1\u53ef\u4ee5\u770b\u5230\u65e5\u8a8c\u6587\u4ef6\u5217\u8868\u548c\u4efb\u4f55\u88ab\u7981\u6b62\u7684 IP \u5730\u5740\u3002<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">\u624b\u52d5\u7981\u6b62 IP \u5730\u5740<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">fail2ban-client set wordpress banip 1.2.3.4<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<h2 class=\"wp-block-heading\">\u624b\u52d5\u53d6\u6d88\u7981\u6b62 IP \u5730\u5740<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">fail2ban-client set wordpress unbanip 1.2.3.4<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<h2 class=\"wp-block-heading\">\u5728 fail2ban \u4e2d\u5c07 IP \u5730\u5740\u6c38\u4e45\u5217\u5165\u767d\u540d\u55ae<\/h2>\n\n\n\n<p>\u6c38\u4e45\u5141\u8a31\u4f60\u7684 IP \u5730\u5740\uff0c\u8acb\u5c07\u52a0\u5165\u5230 <code>\/etc\/fail2ban\/jail.local<\/code> \u4e2d\u4f5c\u70ba ignoreip \u4e2d\u7684\u503c\u3002<\/p>\n\n\n\n<p>\u5c0d\u65bc\u591a\u500b\u5730\u5740\uff0c\u7528\u7a7a\u683c\u5206\u9694\u5b83\u5011\uff0c\u9084\u8981\u6dfb\u52a0\u4e3b\u6a5f IP \u5730\u5740\u3002<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">[DEFAULT]\nignoreip = 127.0.0.1\/8&nbsp; 1.2.3.4\nbantime = 86400\nfindtime = 43200\nmaxretry = 6\n...<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<p>\u7136\u5f8c\u91cd\u65b0\u555f\u52d5 fail2ban<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code lang=\"nginx\" class=\"language-nginx line-numbers\">service fail2ban restart<\/code><\/pre>\n\n\n\n<div style=\"height:20px\" aria-hidden=\"true\" class=\"wp-block-spacer\"><\/div>\n\n\n\n<div class=\"wp-block-stackable-icon-label stk-block-icon-label stk-block stk-4dcd595\" data-block-id=\"4dcd595\"><div class=\"stk-row stk-inner-blocks stk-block-content\">\n<div class=\"wp-block-stackable-icon stk-block-icon has-text-align-left stk-block stk-9c805d9\" data-block-id=\"9c805d9\"><style>.stk-9c805d9 .stk--svg-wrapper .stk--inner-svg svg:last-child{height:20px !important;width:20px !important}.stk-9c805d9 .stk--svg-wrapper .stk--inner-svg svg:last-child,.stk-9c805d9 .stk--svg-wrapper .stk--inner-svg svg:last-child :is(g,path,rect,polygon,ellipse){fill:var(--accent-2) !important}<\/style><span class=\"stk--svg-wrapper\"><div class=\"stk--inner-svg\"><svg style=\"height:0;width:0\"><defs><linearGradient id=\"linear-gradient-9c805d9\" x1=\"0\" x2=\"100%\" y1=\"0\" y2=\"0\"><stop offset=\"0%\" style=\"stop-opacity:1;stop-color:var(--linear-gradient-9-c-805-d-9-color-1)\"><\/stop><stop offset=\"100%\" style=\"stop-opacity:1;stop-color:var(--linear-gradient-9-c-805-d-9-color-2)\"><\/stop><\/linearGradient><\/defs><\/svg><svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"file-alt\" class=\"svg-inline--fa fa-file-alt fa-w-12\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" viewBox=\"0 0 384 512\" width=\"32\" height=\"32\"><path fill=\"currentColor\" d=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"><\/path><\/svg><\/div><\/span><\/div>\n\n\n\n<div class=\"wp-block-stackable-heading stk-block-heading stk-block-heading--v2 stk-block stk-272de49\" id=\"\u53c3\u8003\u8cc7\u6599\uff1a-a-href-https-wpbeaches-com-block-wp-login-php-and-xmlrpc-php-via-fail-2-ban-on-runcloud-target-blank-rel-noreferrer-noopener-block-wp-login-php-and-xmlrpc-php-via-fail-2-ban-on-run-cloud-a\" data-block-id=\"272de49\"><p class=\"stk-block-heading__text\">\u53c3\u8003\u8cc7\u6599\uff1a<a href=\"https:\/\/wpbeaches.com\/block-wp-login-php-and-xmlrpc-php-via-fail2ban-on-runcloud\/\" target=\"_blank\" rel=\"noreferrer noopener\">Block wp-login.php and xmlrpc.php via fail2ban on RunCloud<\/a><\/p><\/div>\n<\/div><\/div>\n\n\n\n<figure class=\"wp-block-image size-full\"><a href=\"https:\/\/notbyai.fyi\" target=\"_blank\" rel=\"noreferrer noopener\"><img loading=\"lazy\" decoding=\"async\" width=\"131\" height=\"42\" src=\"https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/Written-By-Human-Not-By-AI-Badge-black.png\" alt=\"Written By Human\" class=\"wp-image-238\"\/><\/a><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>\u5728 RunCloud \u7ba1\u7406\u7684\u4f3a\u670d\u5668\u4e0a\u4f7f\u7528 fail2ban \u7981\u6b62\u66b4\u529b\u7834\u89e3 WordPress \u7684 wp-login.php \u7684 IP \u5730\u5740\u3002<\/p>\n","protected":false},"author":1,"featured_media":228,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4],"tags":[19,18,20],"featured_image_urls":{"full":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false],"thumbnail":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",128,73,false],"medium":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false],"medium_large":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false],"large":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false],"1536x1536":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false],"2048x2048":["https:\/\/s2.vpsee.net\/wp-content\/uploads\/2023\/08\/runcloud_700x400.jpg",700,400,false]},"post_excerpt_stackable":"<p>\u5728 RunCloud \u7ba1\u7406\u7684\u4f3a\u670d\u5668\u4e0a\u4f7f\u7528 fail2ban \u7981\u6b62\u66b4\u529b\u7834\u89e3 WordPress \u7684 wp-login.php \u7684 IP \u5730\u5740\u3002<\/p>\n","category_list":"<a href=\"https:\/\/s2.vpsee.net\/category\/runcloud\/\" rel=\"category tag\">RunCloud Panel<\/a>","author_info":{"name":"yungke","url":"https:\/\/s2.vpsee.net\/author\/yungke\/"},"comments_num":"0 comments","_links":{"self":[{"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/posts\/225"}],"collection":[{"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/comments?post=225"}],"version-history":[{"count":0,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/posts\/225\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/media\/228"}],"wp:attachment":[{"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/media?parent=225"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/categories?post=225"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/s2.vpsee.net\/wp-json\/wp\/v2\/tags?post=225"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}